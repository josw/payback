<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="me.blog.youreme.payback.dao.DebtHistoryDAO">
	<select id="selectDebtHistoryList" parameterType="String" resultType="DebtHistory" >
	    SELECT
	        creditor,
	        debtor,
	        amount,
	        reason,
	        complete,
	        regdate
	    FROM
	        DebtHistory
	    WHERE
	        debtor == #{debtor}
	        AND complete = 0
	</select>

    <select id="selectReceivableHistoryList" parameterType="String" resultType="DebtHistory" >
	    SELECT
	        creditor,
	        debtor,
	        amount,
	        reason,
	        complete,
	        regdate
	    FROM
	        DebtHistory
	    WHERE
	        creditor == #{creditor}
	        AND complete = 0
	</select>
	
	<insert id="insertDebtHistory" parameterType="DebtHistory">
		INSERT INTO DebtHistory (creditor, debtor, amount, reason, complete, regdate)
		VALUES (#{creditor}, #{debtor}, ${amount}, #{reason}, 0, DATETIME('NOW'))
    </insert>
</mapper>
